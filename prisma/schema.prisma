// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator erd-svg {
  provider = "prisma-erd-generator"
  output   = "./erpansfer-erd.svg"
}

generator erd-png {
  provider = "prisma-erd-generator"
  output   = "./erpansfer-erd.png"
}

model OrderHeader {
  id            Int             @id @default(autoincrement())
  createdAt     DateTime        @default(now())
  orderId       String          @unique
  line          OrderLine[]
  InvoiceHeader InvoiceHeader[]
}

model OrderLine {
  id          Int         @id @default(autoincrement())
  item        String
  description String?
  quantity    Int
  unitPrice   Int
  order       OrderHeader @relation(fields: [orderId], references: [orderId])
  orderId     String
}

//TODO Consider creating  table for "line status" to track shipping and invoice linking
//TODO Maybe a generic "shipping" table would be better, can have PO and line #, carrier, tracking id, etc. 

model InvoiceHeader {
  id        Int           @id @default(autoincrement())
  invoiceId String        @unique
  order     OrderHeader   @relation(fields: [orderId], references: [orderId])
  orderId   String
  name      String?
  line      InvoiceLine[]
}

model InvoiceLine {
  id          String        @id @default(uuid())
  item        String
  description String?
  quantity    Int
  unitPrice   Int
  invoice     InvoiceHeader @relation(fields: [invoiceId], references: [invoiceId])
  invoiceId   String
}
